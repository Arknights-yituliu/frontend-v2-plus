# API

## 请求说明

使用 HTTP GET：

|  名称   | 说明                            |
|:-----:|:------------------------------|
| 请求URL | 	/API路径?参数名=参数值&参数名=参数值...... |

## 请求说明

使用 HTTP POST:

|   名称   | 说明                                                              |
|:------:|:----------------------------------------------------------------|
| 请求 URL | 	/API路径                                                         |
|  请求体   | 	请求体可以使用 JSON 也可以使用 Form 表单, 需要注意的是, 请求的 Content-Type 是一定要设置准确的 |

HTTP POST JSON 格式:

```
{
    "参数名": "参数值",
    "参数名2": "参数值"
}
```

HTTP POST 表单格式:

```
param1=value&param2=value
```

# 材料相关

## 获取精英材料推荐刷取关卡 GET

### 路径：

```
/stage/t3
```

### 参数：

|      字段名       |  数据类型  |  默认值  | 数据类型                 |
|:--------------:|:------:|:-----:|:---------------------|
| expCoefficient | double | 0.625 | 认为经验书的价值为龙门币价值x0.625 |
|   sampleSize   |  int   |  300  | 样本量                  |

### 响应数据：
```json5
{
  // 状态码
  "code": 200,
  // 返回信息描述
  "msg": "操作成功",
  // 返回值
  "data": {
    // 更新日期
    "updateTime": "2024/06/30 10:01:22",
    // 每种精英材料的推荐关卡信息
    "recommendedStageList": [
      {
        // 材料系列，如环烃聚质 ，以蓝材料作为这类材料的代表，例如源岩、固源岩、固源岩组、提纯源岩等被称为固源岩组系材料
        "itemType": "固源岩组",
        // 材料系列id
        "itemTypeId": "30013",
        // 材料系列
        "itemSeries": "固源岩组",
        // 材料系列id（此处与 itemTypeId 作用相同，前端的兼容字段，）
        "itemSeriesId": "30013",
        // 版本
        "version": "v2-0.625-300",
        // 推荐关卡的集合，按关卡效率排列
        "stageResultList": [
          // 关卡信息详情
          {
            // 关卡id
            "stageId": "main_01-07",
            // 关卡名称
            "stageCode": "1-7",
            // 关卡类型
            "stageType": null,
            // 每分钟消耗理智
            "spm": 3.05,
            // 该关卡的主要掉落材料名称
            "itemName": "固源岩",
            // 该关卡的主要掉落材料id
            "itemId": "30012",
            // 该关卡的次要掉落材料id
            "secondaryItemId": "empty",
            // 期望理智
            "apExpect": 4.819211296651295,
            // 材料掉率
            "knockRating": 1.245017001883523,
            // 仅计算该系材料t1-t4等级材料的理智转化率
            "leT4Efficiency": 0.7604177376374756,
            // 仅计算该系材料t1-t3等级材料的理智转化率
            "leT3Efficiency": 0.7604177376374756,
            // 仅计算该系材料t1-t2等级材料的理智转化率
            "leT2Efficiency": 0.7604177376374756,
            // 该关卡全部掉落材料的理智转化率
            "stageEfficiency": 0.9999999241649382,
            // 样本量
            "sampleSize": 668040690,
            // 主材料置信度
            "sampleConfidence": 99.9,
            // 所属章节
            "zoneName": "第一章"
          }
        ]
      }
    ]
  }
}
```

## 获取搓玉推荐关卡 GET

### 路径：

```
/stage/orundum
```

### 参数：
```
本API无参数
```

### 响应数据：
```json5
{
  //状态码
  "code": 200,
  //返回信息描述
  "msg": "操作成功",
  //返回值
  "data": [
    {
      //关卡id
      "stageCode": "1-7",
      //所属章节
      "zoneName": "第一章",
      //不考虑其他消耗每理智可以转为多少玉
      "orundumPerAp": 1.089969524079855,
      //关卡的理智转化率
      "stageEfficiency": 0.999999935563614,
      //关卡的搓玉效率，以1-7为标准
      "orundumPerApEfficiency": 0.9999720404402339,
      //关卡类型
      "stageType": "MAIN", 
      //每搓一抽合成玉需要的龙门币消耗
      "lmdcost": 9.535844273102738
    }
  ]
}
```


## 获取搓玉推荐关卡 GET

### 路径：

```
/stage/act
```

### 参数：
```
本API无参数
```

### 响应数据：
```json5
{
  //状态码
  "code": 200,
  //返回信息描述
  "msg": "操作成功",
  //返回值
  "data": [
    {
      // 活动名称
      "zoneName": "空想花庭·复刻",
      //关卡类型
      "stageType": "ACT_REP",
      //活动关卡信息
      "actStageList": [
        {
          // 关卡id
          "stageId": "act26side_08_rep",
          // 关卡名称
          "stageCode": "HE-8",
          // 该关卡的主要掉落材料id
          "itemId": "30103",
          // 该关卡的主要掉落材料名称
          "itemName": "RMA70-12",
          //期望理智
          "apExpect": 36.00586307894662,
          //掉率
          "knockRating": 0.5832383452093707,
          //关卡理智转化率
          "stageEfficiency": 1.1503097506541156
        }
      ],
      //活动结束日期
      "endTime": 1720123200000
    }
  ]
}
```

## 获取材料价值表 GET

### 路径：

```
/item/value
```

### 参数：

|      字段名       |  数据类型  |  默认值  | 数据类型                 |
|:--------------:|:------:|:-----:|:---------------------|
| expCoefficient | double | 0.625 | 认为经验书的价值为龙门币价值x0.625 |
|   sampleSize   |  int   |  300  | 样本量                  |

```json5
{
  //状态码
  "code": 200,
  //返回信息描述
  "msg": "操作成功",
  //返回值
  "data": [
    {
      "id": 1719884281685,
      //材料id
      "itemId": "30145",
      //材料名称
      "itemName": "晶体电子单元",
      //材料价值（单位：绿票）
      "itemValue": 403.770201,
      //材料价值（单位：理智）
      "itemValueAp": 323.016161,
      "type": "orange",
      //材料稀有度
      "rarity": 5,
      "cardNum": 12,
      "version": "v2-0.625-300",
      "weight": 0
    }
  ]
}
```